pipeline {
    agent any
//     agent {
//           docker {
//               image 'maven:3-alpine'
//               args '-v /root/.m2:/root/.m2'
//           }
//      }
    stages {
         stage('Build') {
             steps {
                 script {
                     sh 'docker build -t AmeyDevarshi/maven1'
                 }
             }
         }
         stage('Test') {
             steps {
                 batchFile 'mvn test'
             }
//              post {
//                     always {
//                         junit 'target/surefire-reports/*.xml'//./jenkins/scripts/deliver.sh
//                     }
//                 }
         }
         stage('Deliver') {
             steps {
                 batchFile './jenkins/scripts/deliver.sh'
             }
         }
     }
}

